<script>
    ctx.fancybox = {
        selector: '.timenode p>img',
        css: '[(@{/libs/fancybox/fancybox.css?=5.0})]',
        js: '[(@{/libs/fancybox/fancybox.umd.js?=5.0})]'
    };
    var selector = '[data-fancybox]:not(.error)';
    if (ctx.fancybox.selector) {
        selector += `, ${ctx.fancybox.selector}`
    }
    var needFancybox = document.querySelectorAll(selector).length !== 0;
    if (!needFancybox) {
        const els = document.getElementsByClassName('ds-memos');
        if (els != undefined && els.length > 0) {
            needFancybox = true;
        }
    }
    if (needFancybox) {
        utils.css(ctx.fancybox.css);
        utils.js(ctx.fancybox.js, { defer: true }).then(function () {
            Fancybox.bind(selector, {
                hideScrollbar: false,
                Thumbs: {
                    autoStart: false,
                },
                caption: (fancybox, slide) => {
                    return slide.triggerEl.alt || slide.triggerEl.dataset.caption || null
                }
            });
        })
    }
</script>